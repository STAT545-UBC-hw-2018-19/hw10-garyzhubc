rowwise() %>%
mutate(Incidents=as.numeric(str_replace_all(Incidents, "\\[.+?\\]", "")))
air.incidents <- read_html("html/Aviation_accidents_and_incidents.html") %>%
html_table(fill=TRUE) %>%
.[[2]] %>%
rename("Deaths"="Deaths[52]") %>%
rename("Incidents"="# of incidents[53]") %>%
rowwise() %>%
mutate(Deaths=as.numeric(str_replace_all(Deaths, "[^0-9.-]", ""))) %>%
rowwise() %>%
mutate(Incidents=as.numeric(str_replace_all(Incidents, "\\[.+?\\]", "")))
write_csv(air.incidents,"data/air_incidents.csv")
air.incidents <- read_csv("data/air_incidents.csv")
ggplot(air.incidents, aes(x=Year, y=Deaths/Incidents, color="red")) +
geom_line()
library(ggplot2)
library(tidyverse)
library(stringr)
library(rvest)
library(httr)
library(jsonlite)
setwd("~/Desktop/hw10-garyzhubc")
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
library(ggplot2)
library(tidyverse)
library(stringr)
library(rvest)
library(httr)
library(jsonlite)
setwd("~/Desktop/hw10-garyzhubc")
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
library(ggplot2)
library(tidyverse)
library(stringr)
library(rvest)
library(httr)
library(jsonlite)
setwd("~/Desktop/hw10-garyzhubc")
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
air.incidents <- read_html("html/Aviation_accidents_and_incidents.html") %>%
html_table(fill=TRUE) %>%
.[[2]] %>%
rename("Deaths"="Deaths[52]") %>%
rename("Incidents"="# of incidents[53]") %>%
rowwise() %>%
mutate(Deaths=as.numeric(str_replace_all(Deaths, "[^0-9.-]", ""))) %>%
rowwise() %>%
mutate(Incidents=as.numeric(str_replace_all(Incidents, "\\[.+?\\]", "")))
write_csv(air.incidents,"data/air_incidents.csv")
air.incidents <- read_csv("data/air_incidents.csv")
ggplot(air.incidents, aes(x=Year, y=Deaths/Incidents, color="red")) +
geom_line()
download.file("https://en.wikipedia.org/wiki/List_of_compositions_by_Giuseppe_Verdi", destfile = "html/List_of_compositions_by_Giuseppe_Verdi.html", quiet=TRUE)
opera <- read_html("html/List_of_compositions_by_Giuseppe_Verdi.html") %>%
html_table(fill=TRUE) %>%
.[[1]] %>%
mutate("Year"=as.numeric(str_extract(.$`First performance`, "\\d{4}"))) %>%
mutate("Language"=str_extract(.$`# Acts, Language`, "(Italian|French)"))
write_csv(opera,"data/opera.csv")
opera <- read_csv("data/opera.csv")
ggplot(opera, aes(x=Language,y=Year,color=Language)) +
geom_jitter()
starships1 <- content(GET("https://swapi.co/api/starships/?page=1"))$results
starships2 <- content(GET("https://swapi.co/api/starships/?page=2"))$results
starships3 <- content(GET("https://swapi.co/api/starships/?page=3"))$results
starships4 <- content(GET("https://swapi.co/api/starships/?page=4"))$results
starships <- data.frame(do.call(rbind,list(do.call(rbind,starships1),do.call(rbind,starships2),do.call(rbind,starships3),do.call(rbind,starships4))))
starships$length <- as.integer(starships$length)
starships$max_atmosphering_speed <- as.integer(starships$max_atmosphering_speed)
write_csv(select(starships,length,max_atmosphering_speed),"data/starships.csv")
starships <- read_csv("data/starships.csv")
starships %>%
drop_na() %>%
ggplot(aes(x=length,y=max_atmosphering_speed)) +
geom_point() +
xlim(0,100) +
ylim(200,1750) +
geom_smooth(method="lm")
people1 <- content(GET("https://swapi.co/api/people/?page=1"))$results
people2 <- content(GET("https://swapi.co/api/people/?page=2"))$results
people3 <- content(GET("https://swapi.co/api/people/?page=3"))$results
people4 <- content(GET("https://swapi.co/api/people/?page=4"))$results
people5 <- content(GET("https://swapi.co/api/people/?page=5"))$results
people6 <- content(GET("https://swapi.co/api/people/?page=6"))$results
people7 <- content(GET("https://swapi.co/api/people/?page=7"))$results
people8 <- content(GET("https://swapi.co/api/people/?page=8"))$results
people9 <- content(GET("https://swapi.co/api/people/?page=9"))$results
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$height <- as.integer(people$height)
people$mass <- as.integer(people$mass)
write_csv(select(people,height,mass),"data/people.csv")
people <- read_csv("data/people.csv")
people %>%
ggplot() +
geom_histogram(aes(x=height))
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
starships <- data.frame(do.call(rbind,list(do.call(rbind,starships1),do.call(rbind,starships2),do.call(rbind,starships3),do.call(rbind,starships4))))
View(starships)
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
View(people)
library(ggplot2)
library(tidyverse)
library(stringr)
library(rvest)
library(httr)
library(jsonlite)
setwd("~/Desktop/hw10-garyzhubc")
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
air.incidents <- read_html("html/Aviation_accidents_and_incidents.html") %>%
html_table(fill=TRUE) %>%
.[[2]] %>%
rename("Deaths"="Deaths[52]") %>%
rename("Incidents"="# of incidents[53]") %>%
rowwise() %>%
mutate(Deaths=as.numeric(str_replace_all(Deaths, "[^0-9.-]", ""))) %>%
rowwise() %>%
mutate(Incidents=as.numeric(str_replace_all(Incidents, "\\[.+?\\]", "")))
write_csv(air.incidents,"data/air_incidents.csv")
air.incidents <- read_csv("data/air_incidents.csv")
ggplot(air.incidents, aes(x=Year, y=Deaths/Incidents, color="red")) +
geom_line()
download.file("https://en.wikipedia.org/wiki/List_of_compositions_by_Giuseppe_Verdi", destfile = "html/List_of_compositions_by_Giuseppe_Verdi.html", quiet=TRUE)
opera <- read_html("html/List_of_compositions_by_Giuseppe_Verdi.html") %>%
html_table(fill=TRUE) %>%
.[[1]] %>%
mutate("Year"=as.numeric(str_extract(.$`First performance`, "\\d{4}"))) %>%
mutate("Language"=str_extract(.$`# Acts, Language`, "(Italian|French)"))
write_csv(opera,"data/opera.csv")
opera <- read_csv("data/opera.csv")
ggplot(opera, aes(x=Language,y=Year,color=Language)) +
geom_jitter()
View(people)
starships1 <- content(GET("https://swapi.co/api/starships/?page=1"))$results
starships2 <- content(GET("https://swapi.co/api/starships/?page=2"))$results
starships3 <- content(GET("https://swapi.co/api/starships/?page=3"))$results
starships4 <- content(GET("https://swapi.co/api/starships/?page=4"))$results
starships <- data.frame(do.call(rbind,list(do.call(rbind,starships1),do.call(rbind,starships2),do.call(rbind,starships3),do.call(rbind,starships4))))
starships$length <- as.integer(starships$length)
starships$max_atmosphering_speed <- as.integer(starships$max_atmosphering_speed)
write_csv(select(starships,length,max_atmosphering_speed),"data/starships.csv")
starships <- read_csv("data/starships.csv")
starships %>%
drop_na() %>%
ggplot(aes(x=length,y=max_atmosphering_speed)) +
geom_point() +
xlim(0,100) +
ylim(200,1750) +
geom_smooth(method="lm")
people1 <- content(GET("https://swapi.co/api/people/?page=1"))$results
people2 <- content(GET("https://swapi.co/api/people/?page=2"))$results
people3 <- content(GET("https://swapi.co/api/people/?page=3"))$results
people4 <- content(GET("https://swapi.co/api/people/?page=4"))$results
people5 <- content(GET("https://swapi.co/api/people/?page=5"))$results
people6 <- content(GET("https://swapi.co/api/people/?page=6"))$results
people7 <- content(GET("https://swapi.co/api/people/?page=7"))$results
people8 <- content(GET("https://swapi.co/api/people/?page=8"))$results
people9 <- content(GET("https://swapi.co/api/people/?page=9"))$results
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$height <- as.integer(people$height)
people$mass <- as.integer(people$mass)
write_csv(select(people,height,mass),"data/people.csv")
people <- read_csv("data/people.csv")
people %>%
ggplot() +
geom_histogram(aes(x=height))
View(starships)
starships <- data.frame(do.call(rbind,list(do.call(rbind,starships1),do.call(rbind,starships2),do.call(rbind,starships3),do.call(rbind,starships4))))
starships1 <- content(GET("https://swapi.co/api/starships/?page=1"))$results
starships2 <- content(GET("https://swapi.co/api/starships/?page=2"))$results
starships3 <- content(GET("https://swapi.co/api/starships/?page=3"))$results
starships4 <- content(GET("https://swapi.co/api/starships/?page=4"))$results
starships <- data.frame(do.call(rbind,list(do.call(rbind,starships1),do.call(rbind,starships2),do.call(rbind,starships3),do.call(rbind,starships4))))
starships$length <- as.integer(starships$length)
starships$max_atmosphering_speed <- as.integer(starships$max_atmosphering_speed)
write_csv(select(starships,length,max_atmosphering_speed,cost_in_credits),"data/starships.csv")
starships$length <- as.integer(starships$length)
starships$max_atmosphering_speed <- as.integer(starships$max_atmosphering_speed)
starships$cost_in_credits <- as.integer(starships$cost_in_credits)
write_csv(select(starships,length,max_atmosphering_speed,cost_in_credits),"data/starships.csv")
starships <- read_csv("data/starships.csv")
starships %>%
drop_na() %>%
ggplot(aes(x=length,y=max_atmosphering_speed,color=cost_in_credits)) +
geom_point() +
xlim(0,100) +
ylim(200,1750) +
geom_smooth(method="lm")
starships %>%
drop_na() %>%
ggplot(aes(x=length,y=max_atmosphering_speed,color=cost_in_credits)) +
geom_point() +
xlim(0,50) +
ylim(200,1750) +
geom_smooth(method="lm")
starships %>%
drop_na() %>%
ggplot(aes(x=length,y=max_atmosphering_speed,color=cost_in_credits)) +
geom_point() +
xlim(0,40) +
ylim(200,1750) +
geom_smooth(method="lm")
people %>%
ggplot() +
geom_histogram(aes(x=height)) +
geom_smooth()
people %>%
ggplot() +
geom_histogram(aes(x=height)) +
geom_smooth(aes(x=height))
people %>%
ggplot() +
geom_histogram(aes(x=height)) +
geom_density()
people %>%
ggplot(aes(x=height)) +
geom_histogram() +
geom_density()
people %>%
ggplot(aes(x=height)) +
geom_histogram() +
geom_density(kernel = "gaussian")
people %>%
ggplot(aes(x=height)) +
geom_histogram() +
geom_density(aes(x=height))
starships %>%
drop_na() %>%
ggplot(aes(x=length,y=max_atmosphering_speed,color=cost_in_credits)) +
geom_point() +
xlim(5,40) +
ylim(200,1750) +
geom_smooth(method="lm")
people %>%
ggplot(aes(x=height)) +
geom_histogram() +
geom_density()
people %>%
ggplot(aes(x=height)) +
geom_histogram()
View(people)
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$gender <- as.integer(people$gender)
people$height <- as.integer(people$height)
write_csv(select(people,height,mass,gender),"data/people.csv")
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$gender <- as.factor(people$gender)
people$gender <- as.factor(people$gender)
people$height <- as.integer(people$height)
write_csv(select(people,height,mass,gender),"data/people.csv")
write_csv(select(people,height,mass),"data/people.csv")
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
write_csv(select(people,height,mass),"data/people.csv")
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$height <- as.integer(people$height)
write_csv(select(people,height,mass),"data/people.csv")
select(people,height,mass)
View(people)
write_csv(select(people,height,mass,gender),"data/people.csv")
write_csv(select(people,height,mass,gender),"data/people.csv")
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$height <- as.integer(people$height)
write_csv(select(people,height,mass,gender),"data/people.csv")
write_csv(select(people,height,mass,gender),"data/people.csv")
write_csv(select(people,height,mass,gender),"data/people.csv")
select(people,height,mass,gender)
write_csv(select(people,height,mass),"data/people.csv")
write_csv(select(people,height),"data/people.csv")
write_csv(select(people,height,mass),"data/people.csv")
select(people,height,gender)
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
write_csv(select(people,height,gender),"data/people.csv")
people$mass <- as.factor(people$gender)
people$gender
View(people)
people$mass <- as.factor(people$gender)
people$gender <- as.factor(people$gender)
people$gender <- as.factor(lapplay(people$gender,unlist))
people$gender <- as.factor(lapply(people$gender,unlist))
write_csv(select(people,height,gender),"data/people.csv")
write_csv(select(people,height),"data/people.csv")
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
write_csv(select(people,height),"data/people.csv")
View(people)
write_csv(select(people,height),"data/people.csv")
write_csv(select(people,height,gender),"data/people.csv")
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
write_csv(select(people,height),"data/people.csv")
select(people,height)
typeof(select(people,height))
select(people,height,gender)
typeof(select(people,height,gender))
?select
typeof(select(people,height,gender))
typeof(data.frame(select(people,height,gender)))
data.frame(select(people,height,gender))
tribble(data.frame(select(people,height,gender)))
tibble(data.frame(select(people,height,gender)))
tibble(select(people,height,gender))
select(people,height,gender)
people$gender <- as.integer(people$gender)
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$gender <- as.factor(people$gender)
as.factor(people$gender)
people$gender
lapplay(people$gender,unlist)
lapply(people$gender,unlist)
people$gender
typeof(people$gender)
people$gender[1]
people$gender[[1]]
list(a = list(1:5, LETTERS[1:5]), b = "Z", c = NA)
unlist(people$gender)
people$gender <- as.factor(unlist(people$gender))
write_csv(select(people,height,gender),"data/people.csv")
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
write_csv(select(people,height,gender),"data/people.csv")
select(people,height,gender)
data.frame(select(people,height,gender))
select(people,height,gender)
select(people,height,gender)
data.frame(select(people,height,gender))
select(people,height,gender)
write_csv(data.frame(select(people,height,gender)),"data/people.csv")
str(select(people,height,gender))
cbind(select(people,height,gender))
str(cbind(select(people,height,gender)))
people$height <- as.integer(people$height)
write_csv(cbind(select(people,height)),"data/people.csv")
people <- read_csv("data/people.csv")
people %>%
ggplot(aes(x=height)) +
geom_histogram()
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_table(fill=TRUE)
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_table(fill=TRUE)
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_attrs(id="mw-content-text") %>%
html_table(fill=TRUE)
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes("body") %>%
html_table(fill=TRUE)
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes("body")
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes("div") %>%
html_table(fill=TRUE)
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes("div")
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes("div",id="mw-content-text")
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes("div") %>%
html_attrs(id="mw-content-text")
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes("div")
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes("div") %>%
html_table()
?html_node
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes(xpath='//*[@id="mw-content-text"]/div/table[2]') %>%
html_table(fill=TRUE)
read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes(xpath='//*[@id="mw-content-text"]/div/table[2]') %>%
html_table(fill=TRUE) %>%
.[[1]]
library(ggplot2)
library(tidyverse)
library(stringr)
library(rvest)
library(httr)
library(jsonlite)
setwd("~/Desktop/hw10-garyzhubc")
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
library(ggplot2)
library(tidyverse)
library(stringr)
library(rvest)
library(httr)
library(jsonlite)
setwd("~/Desktop/hw10-garyzhubc")
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
air.incidents <- read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes(xpath='//*[@id="mw-content-text"]/div/table[2]') %>%
html_table(fill=TRUE) %>%
.[[1]] %>%
rename("Deaths"="Deaths[52]") %>%
rename("Incidents"="# of incidents[53]") %>%
rowwise() %>%
mutate(Deaths=as.numeric(str_replace_all(Deaths, "[^0-9.-]", ""))) %>%
rowwise() %>%
mutate(Incidents=as.numeric(str_replace_all(Incidents, "\\[.+?\\]", "")))
write_csv(air.incidents,"data/air_incidents.csv")
air.incidents <- read_csv("data/air_incidents.csv")
ggplot(air.incidents, aes(x=Year, y=Deaths/Incidents, color="red")) +
geom_line()
download.file("https://en.wikipedia.org/wiki/List_of_compositions_by_Giuseppe_Verdi", destfile = "html/List_of_compositions_by_Giuseppe_Verdi.html", quiet=TRUE)
opera <- read_html("html/List_of_compositions_by_Giuseppe_Verdi.html") %>%
html_table(fill=TRUE) %>%
.[[1]] %>%
mutate("Year"=as.numeric(str_extract(.$`First performance`, "\\d{4}"))) %>%
mutate("Language"=str_extract(.$`# Acts, Language`, "(Italian|French)"))
write_csv(opera,"data/opera.csv")
opera <- read_csv("data/opera.csv")
ggplot(opera, aes(x=Language,y=Year,color=Language)) +
geom_jitter()
starships1 <- content(GET("https://swapi.co/api/starships/?page=1"))$results
starships2 <- content(GET("https://swapi.co/api/starships/?page=2"))$results
starships3 <- content(GET("https://swapi.co/api/starships/?page=3"))$results
starships4 <- content(GET("https://swapi.co/api/starships/?page=4"))$results
starships <- data.frame(do.call(rbind,list(do.call(rbind,starships1),do.call(rbind,starships2),do.call(rbind,starships3),do.call(rbind,starships4))))
starships$length <- as.integer(starships$length)
starships$max_atmosphering_speed <- as.integer(starships$max_atmosphering_speed)
starships$cost_in_credits <- as.integer(starships$cost_in_credits)
write_csv(select(starships,length,max_atmosphering_speed,cost_in_credits),"data/starships.csv")
starships <- read_csv("data/starships.csv")
starships %>%
drop_na() %>%
ggplot(aes(x=length,y=max_atmosphering_speed,color=cost_in_credits)) +
geom_point() +
xlim(5,40) +
ylim(200,1750) +
geom_smooth(method="lm")
people1 <- content(GET("https://swapi.co/api/people/?page=1"))$results
people2 <- content(GET("https://swapi.co/api/people/?page=2"))$results
people3 <- content(GET("https://swapi.co/api/people/?page=3"))$results
people4 <- content(GET("https://swapi.co/api/people/?page=4"))$results
people5 <- content(GET("https://swapi.co/api/people/?page=5"))$results
people6 <- content(GET("https://swapi.co/api/people/?page=6"))$results
people7 <- content(GET("https://swapi.co/api/people/?page=7"))$results
people8 <- content(GET("https://swapi.co/api/people/?page=8"))$results
people9 <- content(GET("https://swapi.co/api/people/?page=9"))$results
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$height <- as.integer(people$height)
write_csv(cbind(select(people,height)),"data/people.csv")
people <- read_csv("data/people.csv")
people %>%
ggplot(aes(x=height)) +
geom_histogram()
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
library(ggplot2)
library(tidyverse)
library(stringr)
library(rvest)
library(httr)
library(jsonlite)
setwd("~/Desktop/hw10-garyzhubc")
# download.file("https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents", destfile = "html/Aviation_accidents_and_incidents.html", quiet=TRUE)
air.incidents <- read_html("html/Aviation_accidents_and_incidents.html") %>%
html_nodes(xpath='//*[@id="mw-content-text"]/div/table[2]') %>%
html_table(fill=TRUE) %>%
.[[1]] %>%
rename("Deaths"="Deaths[52]") %>%
rename("Incidents"="# of incidents[53]") %>%
rowwise() %>%
mutate(Deaths=as.numeric(str_replace_all(Deaths, "[^0-9.-]", ""))) %>%
rowwise() %>%
mutate(Incidents=as.numeric(str_replace_all(Incidents, "\\[.+?\\]", "")))
write_csv(air.incidents,"data/air_incidents.csv")
air.incidents <- read_csv("data/air_incidents.csv")
ggplot(air.incidents, aes(x=Year, y=Deaths/Incidents, color="red")) +
geom_line()
# download.file("https://en.wikipedia.org/wiki/List_of_compositions_by_Giuseppe_Verdi", destfile = "html/List_of_compositions_by_Giuseppe_Verdi.html", quiet=TRUE)
opera <- read_html("html/List_of_compositions_by_Giuseppe_Verdi.html") %>%
html_table(fill=TRUE) %>%
.[[1]] %>%
mutate("Year"=as.numeric(str_extract(.$`First performance`, "\\d{4}"))) %>%
mutate("Language"=str_extract(.$`# Acts, Language`, "(Italian|French)"))
write_csv(opera,"data/opera.csv")
opera <- read_csv("data/opera.csv")
ggplot(opera, aes(x=Language,y=Year,color=Language)) +
geom_jitter()
starships1 <- content(GET("https://swapi.co/api/starships/?page=1"))$results
starships2 <- content(GET("https://swapi.co/api/starships/?page=2"))$results
starships3 <- content(GET("https://swapi.co/api/starships/?page=3"))$results
starships4 <- content(GET("https://swapi.co/api/starships/?page=4"))$results
starships <- data.frame(do.call(rbind,list(do.call(rbind,starships1),do.call(rbind,starships2),do.call(rbind,starships3),do.call(rbind,starships4))))
starships$length <- as.integer(starships$length)
starships$max_atmosphering_speed <- as.integer(starships$max_atmosphering_speed)
starships$cost_in_credits <- as.integer(starships$cost_in_credits)
write_csv(select(starships,length,max_atmosphering_speed,cost_in_credits),"data/starships.csv")
starships <- read_csv("data/starships.csv")
starships %>%
drop_na() %>%
ggplot(aes(x=length,y=max_atmosphering_speed,color=cost_in_credits)) +
geom_point() +
xlim(5,40) +
ylim(200,1750) +
geom_smooth(method="lm")
people1 <- content(GET("https://swapi.co/api/people/?page=1"))$results
people2 <- content(GET("https://swapi.co/api/people/?page=2"))$results
people3 <- content(GET("https://swapi.co/api/people/?page=3"))$results
people4 <- content(GET("https://swapi.co/api/people/?page=4"))$results
people5 <- content(GET("https://swapi.co/api/people/?page=5"))$results
people6 <- content(GET("https://swapi.co/api/people/?page=6"))$results
people7 <- content(GET("https://swapi.co/api/people/?page=7"))$results
people8 <- content(GET("https://swapi.co/api/people/?page=8"))$results
people9 <- content(GET("https://swapi.co/api/people/?page=9"))$results
people <- data.frame(do.call(rbind,list(do.call(rbind,people1),do.call(rbind,people2),do.call(rbind,people3),do.call(rbind,people4),do.call(rbind,people5),do.call(rbind,people6),do.call(rbind,people7),do.call(rbind,people8),do.call(rbind,people9))))
people$height <- as.integer(people$height)
write_csv(cbind(select(people,height)),"data/people.csv")
people <- read_csv("data/people.csv")
people %>%
ggplot(aes(x=height)) +
geom_histogram()
